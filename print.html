<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>ORMP</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="book.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="index.html">Home</a></li><li class="chapter-item affix "><li class="part-title">src</li><li class="chapter-item "><a href="src/eco/index.html">❱ eco</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/eco/Oracle.sol/contract.Oracle.html">Oracle</a></li><li class="chapter-item "><a href="src/eco/Relayer.sol/contract.Relayer.html">Relayer</a></li></ol></li><li class="chapter-item "><a href="src/imt/index.html">❱ imt</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/imt/IncrementalMerkleTree.sol/library.IncrementalMerkleTree.html">IncrementalMerkleTree</a></li></ol></li><li class="chapter-item "><a href="src/interfaces/index.html">❱ interfaces</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/interfaces/IFeedOracle.sol/interface.IFeedOracle.html">IFeedOracle</a></li><li class="chapter-item "><a href="src/interfaces/IORMP.sol/interface.IORMP.html">IORMP</a></li><li class="chapter-item "><a href="src/interfaces/IOracle.sol/interface.IOracle.html">IOracle</a></li><li class="chapter-item "><a href="src/interfaces/IRelayer.sol/interface.IRelayer.html">IRelayer</a></li><li class="chapter-item "><a href="src/interfaces/IVerifier.sol/interface.IVerifier.html">IVerifier</a></li></ol></li><li class="chapter-item "><a href="src/security/index.html">❱ security</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/security/ExcessivelySafeCall.sol/library.ExcessivelySafeCall.html">ExcessivelySafeCall</a></li><li class="chapter-item "><a href="src/security/ReentrancyGuard.sol/abstract.ReentrancyGuard.html">ReentrancyGuard</a></li></ol></li><li class="chapter-item "><a href="src/user/index.html">❱ user</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/user/Application.sol/abstract.Application.html">Application</a></li></ol></li><li class="chapter-item "><a href="src/Channel.sol/contract.Channel.html">Channel</a></li><li class="chapter-item "><a href="src/Common.sol/struct.Message.html">Message</a></li><li class="chapter-item "><a href="src/Common.sol/struct.UC.html">UC</a></li><li class="chapter-item "><a href="src/Common.sol/function.hash.html">hash</a></li><li class="chapter-item "><a href="src/ORMP.sol/contract.ORMP.html">ORMP</a></li><li class="chapter-item "><a href="src/UserConfig.sol/contract.UserConfig.html">UserConfig</a></li><li class="chapter-item "><a href="src/Verifier.sol/abstract.Verifier.html">Verifier</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">ORMP</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/darwinia-network/ORMP" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="ormp"><a class="header" href="#ormp">ORMP</a></h1>
<p>Oracle and Relayer based Message Protocol.</p>
<h2 id="deployments"><a class="header" href="#deployments">Deployments</a></h2>
<h3 id="canonical-cross-chain-deployment-addresses"><a class="header" href="#canonical-cross-chain-deployment-addresses">Canonical Cross-chain Deployment Addresses</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Contract</th><th>Canonical Cross-chain Deployment Address</th></tr></thead><tbody>
<tr><td>ORMP</td><td>0x00000000001523057a05d6293C1e5171eE33eE0A</td></tr>
<tr><td>Oracle</td><td>0x0000000000ba03146Cc235509E802873D418a6bc</td></tr>
<tr><td>Relayer</td><td>0x0000000000808fE9bDCc1d180EfbF5C53552a6b1</td></tr>
<tr><td>MsgDAO</td><td>0x000000000879926D12aF396788C0785B7e581e53</td></tr>
</tbody></table>
</div>
<h2 id="usage"><a class="header" href="#usage">Usage</a></h2>
<p>To install with <a href="https://github.com/gakonst/foundry"><strong>Foundry</strong></a>:</p>
<pre><code class="language-sh">forge install darwinia-network/ORMP
</code></pre>
<p>To install with <a href="https://github.com/nomiclabs/hardhat"><strong>Hardhat</strong></a> or <a href="https://github.com/trufflesuite/truffle"><strong>Truffle</strong></a>:</p>
<pre><code class="language-sh">npm install @darwinia/ormp
</code></pre>
<h2 id="install"><a class="header" href="#install">Install</a></h2>
<p>To install dependencies and compile contracts:</p>
<pre><code class="language-sh">git clone --recurse-submodules https://github.com/darwinia-network/ORMP.git &amp;&amp; cd ORMP
make tools
make
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents"><a class="header" href="#contents">Contents</a></h1>
<ul>
<li><a href="src/eco/Oracle.sol/contract.Oracle.html">Oracle</a></li>
<li><a href="src/eco/Relayer.sol/contract.Relayer.html">Relayer</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="oracle"><a class="header" href="#oracle">Oracle</a></h1>
<p><a href="https://github.com/darwinia-network/ORMP/blob/821000ae7daba26d127e75c86af046b68237ba78/src/eco/Oracle.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/eco/Oracle.sol//src/Verifier.sol/abstract.Verifier.html">Verifier</a></p>
<h2 id="state-variables"><a class="header" href="#state-variables">State Variables</a></h2>
<h3 id="protocol"><a class="header" href="#protocol">PROTOCOL</a></h3>
<pre><code class="language-solidity">address public immutable PROTOCOL;
</code></pre>
<h3 id="owner"><a class="header" href="#owner">owner</a></h3>
<pre><code class="language-solidity">address public owner;
</code></pre>
<h3 id="feeof"><a class="header" href="#feeof">feeOf</a></h3>
<pre><code class="language-solidity">mapping(uint256 =&gt; uint256) public feeOf;
</code></pre>
<h3 id="dapiof"><a class="header" href="#dapiof">dapiOf</a></h3>
<pre><code class="language-solidity">mapping(uint256 =&gt; address) public dapiOf;
</code></pre>
<h3 id="approvedof"><a class="header" href="#approvedof">approvedOf</a></h3>
<pre><code class="language-solidity">mapping(address =&gt; bool) public approvedOf;
</code></pre>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<h3 id="onlyowner"><a class="header" href="#onlyowner">onlyOwner</a></h3>
<pre><code class="language-solidity">modifier onlyOwner();
</code></pre>
<h3 id="onlyapproved"><a class="header" href="#onlyapproved">onlyApproved</a></h3>
<pre><code class="language-solidity">modifier onlyApproved();
</code></pre>
<h3 id="constructor"><a class="header" href="#constructor">constructor</a></h3>
<pre><code class="language-solidity">constructor(address dao, address ormp);
</code></pre>
<h3 id="receive"><a class="header" href="#receive">receive</a></h3>
<pre><code class="language-solidity">receive() external payable;
</code></pre>
<h3 id="withdraw"><a class="header" href="#withdraw">withdraw</a></h3>
<pre><code class="language-solidity">function withdraw(address to, uint256 amount) external onlyApproved;
</code></pre>
<h3 id="isapproved"><a class="header" href="#isapproved">isApproved</a></h3>
<pre><code class="language-solidity">function isApproved(address operator) public view returns (bool);
</code></pre>
<h3 id="changeowner"><a class="header" href="#changeowner">changeOwner</a></h3>
<pre><code class="language-solidity">function changeOwner(address owner_) external onlyOwner;
</code></pre>
<h3 id="setapproved"><a class="header" href="#setapproved">setApproved</a></h3>
<pre><code class="language-solidity">function setApproved(address operator, bool approve) external onlyOwner;
</code></pre>
<h3 id="setfee"><a class="header" href="#setfee">setFee</a></h3>
<pre><code class="language-solidity">function setFee(uint256 chainId, uint256 fee_) external onlyApproved;
</code></pre>
<h3 id="setdapi"><a class="header" href="#setdapi">setDapi</a></h3>
<pre><code class="language-solidity">function setDapi(uint256 chainId, address dapi) external onlyOwner;
</code></pre>
<h3 id="fee"><a class="header" href="#fee">fee</a></h3>
<pre><code class="language-solidity">function fee(uint256 toChainId, address) public view returns (uint256);
</code></pre>
<h3 id="assign"><a class="header" href="#assign">assign</a></h3>
<pre><code class="language-solidity">function assign(bytes32 msgHash) external payable;
</code></pre>
<h3 id="merkleroot"><a class="header" href="#merkleroot">merkleRoot</a></h3>
<pre><code class="language-solidity">function merkleRoot(uint256 chainId, uint256) public view override returns (bytes32);
</code></pre>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<h3 id="assigned"><a class="header" href="#assigned">Assigned</a></h3>
<pre><code class="language-solidity">event Assigned(bytes32 indexed msgHash, uint256 fee);
</code></pre>
<h3 id="setfee-1"><a class="header" href="#setfee-1">SetFee</a></h3>
<pre><code class="language-solidity">event SetFee(uint256 indexed chainId, uint256 fee);
</code></pre>
<h3 id="setdapi-1"><a class="header" href="#setdapi-1">SetDapi</a></h3>
<pre><code class="language-solidity">event SetDapi(uint256 indexed chainId, address dapi);
</code></pre>
<h3 id="setapproved-1"><a class="header" href="#setapproved-1">SetApproved</a></h3>
<pre><code class="language-solidity">event SetApproved(address operator, bool approve);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="relayer"><a class="header" href="#relayer">Relayer</a></h1>
<p><a href="https://github.com/darwinia-network/ORMP/blob/821000ae7daba26d127e75c86af046b68237ba78/src/eco/Relayer.sol">Git Source</a></p>
<h2 id="state-variables-1"><a class="header" href="#state-variables-1">State Variables</a></h2>
<h3 id="protocol-1"><a class="header" href="#protocol-1">PROTOCOL</a></h3>
<pre><code class="language-solidity">address public immutable PROTOCOL;
</code></pre>
<h3 id="owner-1"><a class="header" href="#owner-1">owner</a></h3>
<pre><code class="language-solidity">address public owner;
</code></pre>
<h3 id="priceof"><a class="header" href="#priceof">priceOf</a></h3>
<pre><code class="language-solidity">mapping(uint256 =&gt; DstPrice) public priceOf;
</code></pre>
<h3 id="configof"><a class="header" href="#configof">configOf</a></h3>
<pre><code class="language-solidity">mapping(uint256 =&gt; DstConfig) public configOf;
</code></pre>
<h3 id="approvedof-1"><a class="header" href="#approvedof-1">approvedOf</a></h3>
<pre><code class="language-solidity">mapping(address =&gt; bool) public approvedOf;
</code></pre>
<h2 id="functions-1"><a class="header" href="#functions-1">Functions</a></h2>
<h3 id="onlyowner-1"><a class="header" href="#onlyowner-1">onlyOwner</a></h3>
<pre><code class="language-solidity">modifier onlyOwner();
</code></pre>
<h3 id="onlyapproved-1"><a class="header" href="#onlyapproved-1">onlyApproved</a></h3>
<pre><code class="language-solidity">modifier onlyApproved();
</code></pre>
<h3 id="constructor-1"><a class="header" href="#constructor-1">constructor</a></h3>
<pre><code class="language-solidity">constructor(address dao, address ormp);
</code></pre>
<h3 id="receive-1"><a class="header" href="#receive-1">receive</a></h3>
<pre><code class="language-solidity">receive() external payable;
</code></pre>
<h3 id="withdraw-1"><a class="header" href="#withdraw-1">withdraw</a></h3>
<pre><code class="language-solidity">function withdraw(address to, uint256 amount) external onlyApproved;
</code></pre>
<h3 id="isapproved-1"><a class="header" href="#isapproved-1">isApproved</a></h3>
<pre><code class="language-solidity">function isApproved(address operator) public view returns (bool);
</code></pre>
<h3 id="changeowner-1"><a class="header" href="#changeowner-1">changeOwner</a></h3>
<pre><code class="language-solidity">function changeOwner(address owner_) external onlyOwner;
</code></pre>
<h3 id="setapproved-2"><a class="header" href="#setapproved-2">setApproved</a></h3>
<pre><code class="language-solidity">function setApproved(address operator, bool approve) public onlyOwner;
</code></pre>
<h3 id="setdstprice"><a class="header" href="#setdstprice">setDstPrice</a></h3>
<pre><code class="language-solidity">function setDstPrice(uint256 chainId, uint128 dstPriceRatio, uint128 dstGasPriceInWei) external onlyApproved;
</code></pre>
<h3 id="setdstconfig"><a class="header" href="#setdstconfig">setDstConfig</a></h3>
<pre><code class="language-solidity">function setDstConfig(uint256 chainId, uint64 baseGas, uint64 gasPerByte) external onlyApproved;
</code></pre>
<h3 id="fee-1"><a class="header" href="#fee-1">fee</a></h3>
<pre><code class="language-solidity">function fee(uint256 toChainId, address, uint256 gasLimit, bytes calldata encoded, bytes calldata)
    public
    view
    returns (uint256);
</code></pre>
<h3 id="assign-1"><a class="header" href="#assign-1">assign</a></h3>
<pre><code class="language-solidity">function assign(bytes32 msgHash, bytes calldata params) external payable;
</code></pre>
<h3 id="relay"><a class="header" href="#relay">relay</a></h3>
<pre><code class="language-solidity">function relay(Message calldata message, bytes calldata proof) external onlyApproved;
</code></pre>
<h2 id="events-1"><a class="header" href="#events-1">Events</a></h2>
<h3 id="assigned-1"><a class="header" href="#assigned-1">Assigned</a></h3>
<pre><code class="language-solidity">event Assigned(bytes32 indexed msgHash, uint256 fee, bytes params, bytes32[32] proof);
</code></pre>
<h3 id="setdstprice-1"><a class="header" href="#setdstprice-1">SetDstPrice</a></h3>
<pre><code class="language-solidity">event SetDstPrice(uint256 indexed chainId, uint128 dstPriceRatio, uint128 dstGasPriceInWei);
</code></pre>
<h3 id="setdstconfig-1"><a class="header" href="#setdstconfig-1">SetDstConfig</a></h3>
<pre><code class="language-solidity">event SetDstConfig(uint256 indexed chainId, uint64 baseGas, uint64 gasPerByte);
</code></pre>
<h3 id="setapproved-3"><a class="header" href="#setapproved-3">SetApproved</a></h3>
<pre><code class="language-solidity">event SetApproved(address operator, bool approve);
</code></pre>
<h2 id="structs"><a class="header" href="#structs">Structs</a></h2>
<h3 id="dstprice"><a class="header" href="#dstprice">DstPrice</a></h3>
<pre><code class="language-solidity">struct DstPrice {
    uint128 dstPriceRatio;
    uint128 dstGasPriceInWei;
}
</code></pre>
<h3 id="dstconfig"><a class="header" href="#dstconfig">DstConfig</a></h3>
<pre><code class="language-solidity">struct DstConfig {
    uint64 baseGas;
    uint64 gasPerByte;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-1"><a class="header" href="#contents-1">Contents</a></h1>
<ul>
<li><a href="src/imt/IncrementalMerkleTree.sol/library.IncrementalMerkleTree.html">IncrementalMerkleTree</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="incrementalmerkletree"><a class="header" href="#incrementalmerkletree">IncrementalMerkleTree</a></h1>
<p><a href="https://github.com/darwinia-network/ORMP/blob/821000ae7daba26d127e75c86af046b68237ba78/src/imt/IncrementalMerkleTree.sol">Git Source</a></p>
<p><strong>Author:</strong>
Illusory Systems Inc.</p>
<p>An incremental merkle tree modeled on the eth2 deposit contract.</p>
<h2 id="state-variables-2"><a class="header" href="#state-variables-2">State Variables</a></h2>
<h3 id="tree_depth"><a class="header" href="#tree_depth">TREE_DEPTH</a></h3>
<pre><code class="language-solidity">uint256 private constant TREE_DEPTH = 32;
</code></pre>
<h3 id="max_leaves"><a class="header" href="#max_leaves">MAX_LEAVES</a></h3>
<pre><code class="language-solidity">uint256 private constant MAX_LEAVES = 2 ** TREE_DEPTH - 1;
</code></pre>
<h3 id="z_0"><a class="header" href="#z_0">Z_0</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_0 = hex&quot;0000000000000000000000000000000000000000000000000000000000000000&quot;;
</code></pre>
<h3 id="z_1"><a class="header" href="#z_1">Z_1</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_1 = hex&quot;ad3228b676f7d3cd4284a5443f17f1962b36e491b30a40b2405849e597ba5fb5&quot;;
</code></pre>
<h3 id="z_2"><a class="header" href="#z_2">Z_2</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_2 = hex&quot;b4c11951957c6f8f642c4af61cd6b24640fec6dc7fc607ee8206a99e92410d30&quot;;
</code></pre>
<h3 id="z_3"><a class="header" href="#z_3">Z_3</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_3 = hex&quot;21ddb9a356815c3fac1026b6dec5df3124afbadb485c9ba5a3e3398a04b7ba85&quot;;
</code></pre>
<h3 id="z_4"><a class="header" href="#z_4">Z_4</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_4 = hex&quot;e58769b32a1beaf1ea27375a44095a0d1fb664ce2dd358e7fcbfb78c26a19344&quot;;
</code></pre>
<h3 id="z_5"><a class="header" href="#z_5">Z_5</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_5 = hex&quot;0eb01ebfc9ed27500cd4dfc979272d1f0913cc9f66540d7e8005811109e1cf2d&quot;;
</code></pre>
<h3 id="z_6"><a class="header" href="#z_6">Z_6</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_6 = hex&quot;887c22bd8750d34016ac3c66b5ff102dacdd73f6b014e710b51e8022af9a1968&quot;;
</code></pre>
<h3 id="z_7"><a class="header" href="#z_7">Z_7</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_7 = hex&quot;ffd70157e48063fc33c97a050f7f640233bf646cc98d9524c6b92bcf3ab56f83&quot;;
</code></pre>
<h3 id="z_8"><a class="header" href="#z_8">Z_8</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_8 = hex&quot;9867cc5f7f196b93bae1e27e6320742445d290f2263827498b54fec539f756af&quot;;
</code></pre>
<h3 id="z_9"><a class="header" href="#z_9">Z_9</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_9 = hex&quot;cefad4e508c098b9a7e1d8feb19955fb02ba9675585078710969d3440f5054e0&quot;;
</code></pre>
<h3 id="z_10"><a class="header" href="#z_10">Z_10</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_10 = hex&quot;f9dc3e7fe016e050eff260334f18a5d4fe391d82092319f5964f2e2eb7c1c3a5&quot;;
</code></pre>
<h3 id="z_11"><a class="header" href="#z_11">Z_11</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_11 = hex&quot;f8b13a49e282f609c317a833fb8d976d11517c571d1221a265d25af778ecf892&quot;;
</code></pre>
<h3 id="z_12"><a class="header" href="#z_12">Z_12</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_12 = hex&quot;3490c6ceeb450aecdc82e28293031d10c7d73bf85e57bf041a97360aa2c5d99c&quot;;
</code></pre>
<h3 id="z_13"><a class="header" href="#z_13">Z_13</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_13 = hex&quot;c1df82d9c4b87413eae2ef048f94b4d3554cea73d92b0f7af96e0271c691e2bb&quot;;
</code></pre>
<h3 id="z_14"><a class="header" href="#z_14">Z_14</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_14 = hex&quot;5c67add7c6caf302256adedf7ab114da0acfe870d449a3a489f781d659e8becc&quot;;
</code></pre>
<h3 id="z_15"><a class="header" href="#z_15">Z_15</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_15 = hex&quot;da7bce9f4e8618b6bd2f4132ce798cdc7a60e7e1460a7299e3c6342a579626d2&quot;;
</code></pre>
<h3 id="z_16"><a class="header" href="#z_16">Z_16</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_16 = hex&quot;2733e50f526ec2fa19a22b31e8ed50f23cd1fdf94c9154ed3a7609a2f1ff981f&quot;;
</code></pre>
<h3 id="z_17"><a class="header" href="#z_17">Z_17</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_17 = hex&quot;e1d3b5c807b281e4683cc6d6315cf95b9ade8641defcb32372f1c126e398ef7a&quot;;
</code></pre>
<h3 id="z_18"><a class="header" href="#z_18">Z_18</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_18 = hex&quot;5a2dce0a8a7f68bb74560f8f71837c2c2ebbcbf7fffb42ae1896f13f7c7479a0&quot;;
</code></pre>
<h3 id="z_19"><a class="header" href="#z_19">Z_19</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_19 = hex&quot;b46a28b6f55540f89444f63de0378e3d121be09e06cc9ded1c20e65876d36aa0&quot;;
</code></pre>
<h3 id="z_20"><a class="header" href="#z_20">Z_20</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_20 = hex&quot;c65e9645644786b620e2dd2ad648ddfcbf4a7e5b1a3a4ecfe7f64667a3f0b7e2&quot;;
</code></pre>
<h3 id="z_21"><a class="header" href="#z_21">Z_21</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_21 = hex&quot;f4418588ed35a2458cffeb39b93d26f18d2ab13bdce6aee58e7b99359ec2dfd9&quot;;
</code></pre>
<h3 id="z_22"><a class="header" href="#z_22">Z_22</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_22 = hex&quot;5a9c16dc00d6ef18b7933a6f8dc65ccb55667138776f7dea101070dc8796e377&quot;;
</code></pre>
<h3 id="z_23"><a class="header" href="#z_23">Z_23</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_23 = hex&quot;4df84f40ae0c8229d0d6069e5c8f39a7c299677a09d367fc7b05e3bc380ee652&quot;;
</code></pre>
<h3 id="z_24"><a class="header" href="#z_24">Z_24</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_24 = hex&quot;cdc72595f74c7b1043d0e1ffbab734648c838dfb0527d971b602bc216c9619ef&quot;;
</code></pre>
<h3 id="z_25"><a class="header" href="#z_25">Z_25</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_25 = hex&quot;0abf5ac974a1ed57f4050aa510dd9c74f508277b39d7973bb2dfccc5eeb0618d&quot;;
</code></pre>
<h3 id="z_26"><a class="header" href="#z_26">Z_26</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_26 = hex&quot;b8cd74046ff337f0a7bf2c8e03e10f642c1886798d71806ab1e888d9e5ee87d0&quot;;
</code></pre>
<h3 id="z_27"><a class="header" href="#z_27">Z_27</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_27 = hex&quot;838c5655cb21c6cb83313b5a631175dff4963772cce9108188b34ac87c81c41e&quot;;
</code></pre>
<h3 id="z_28"><a class="header" href="#z_28">Z_28</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_28 = hex&quot;662ee4dd2dd7b2bc707961b1e646c4047669dcb6584f0d8d770daf5d7e7deb2e&quot;;
</code></pre>
<h3 id="z_29"><a class="header" href="#z_29">Z_29</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_29 = hex&quot;388ab20e2573d171a88108e79d820e98f26c0b84aa8b2f4aa4968dbb818ea322&quot;;
</code></pre>
<h3 id="z_30"><a class="header" href="#z_30">Z_30</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_30 = hex&quot;93237c50ba75ee485f4c22adf2f741400bdf8d6a9cc7df7ecae576221665d735&quot;;
</code></pre>
<h3 id="z_31"><a class="header" href="#z_31">Z_31</a></h3>
<pre><code class="language-solidity">bytes32 private constant Z_31 = hex&quot;8448818bb4ae4562849e949e17ac16e0be16688e156b5cf15e098c627c0056a9&quot;;
</code></pre>
<h2 id="functions-2"><a class="header" href="#functions-2">Functions</a></h2>
<h3 id="insert"><a class="header" href="#insert">insert</a></h3>
<p>Inserts <code>_node</code> into merkle tree</p>
<p><em>Reverts if tree is full</em></p>
<pre><code class="language-solidity">function insert(Tree storage _tree, bytes32 _node) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tree</code></td><td><code>Tree</code></td><td></td></tr>
<tr><td><code>_node</code></td><td><code>bytes32</code></td><td>Element to insert into tree</td></tr>
</tbody></table>
</div>
<h3 id="rootwithctx"><a class="header" href="#rootwithctx">rootWithCtx</a></h3>
<p>Calculates and returns<code>_tree</code>'s current root given array of zero
hashes</p>
<pre><code class="language-solidity">function rootWithCtx(Tree storage _tree, bytes32[TREE_DEPTH] memory _zeroes) internal view returns (bytes32 _current);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tree</code></td><td><code>Tree</code></td><td></td></tr>
<tr><td><code>_zeroes</code></td><td><code>bytes32[TREE_DEPTH]</code></td><td>Array of zero hashes</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_current</code></td><td><code>bytes32</code></td><td>Calculated root of <code>_tree</code></td></tr>
</tbody></table>
</div>
<h3 id="root"><a class="header" href="#root">root</a></h3>
<p>Calculates and returns<code>_tree</code>'s current root</p>
<pre><code class="language-solidity">function root(Tree storage _tree) internal view returns (bytes32);
</code></pre>
<h3 id="zerohashes"><a class="header" href="#zerohashes">zeroHashes</a></h3>
<p>Returns array of TREE_DEPTH zero hashes</p>
<pre><code class="language-solidity">function zeroHashes() internal pure returns (bytes32[TREE_DEPTH] memory _zeroes);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_zeroes</code></td><td><code>bytes32[TREE_DEPTH]</code></td><td>Array of TREE_DEPTH zero hashes</td></tr>
</tbody></table>
</div>
<h3 id="branchroot"><a class="header" href="#branchroot">branchRoot</a></h3>
<p>Calculates and returns the merkle root for the given leaf
<code>_item</code>, a merkle branch, and the index of <code>_item</code> in the tree.</p>
<pre><code class="language-solidity">function branchRoot(bytes32 _item, bytes32[TREE_DEPTH] memory _branch, uint256 _index)
    internal
    pure
    returns (bytes32 _current);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_item</code></td><td><code>bytes32</code></td><td>Merkle leaf</td></tr>
<tr><td><code>_branch</code></td><td><code>bytes32[TREE_DEPTH]</code></td><td>Merkle proof</td></tr>
<tr><td><code>_index</code></td><td><code>uint256</code></td><td>Index of <code>_item</code> in tree</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_current</code></td><td><code>bytes32</code></td><td>Calculated merkle root</td></tr>
</tbody></table>
</div>
<h3 id="prove"><a class="header" href="#prove">prove</a></h3>
<pre><code class="language-solidity">function prove(Tree storage _tree) internal view returns (bytes32[TREE_DEPTH] memory proof);
</code></pre>
<h2 id="structs-1"><a class="header" href="#structs-1">Structs</a></h2>
<h3 id="tree"><a class="header" href="#tree">Tree</a></h3>
<p>Struct representing incremental merkle tree. Contains current
branch and the number of inserted leaves in the tree.</p>
<pre><code class="language-solidity">struct Tree {
    bytes32[TREE_DEPTH] branch;
    uint256 count;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-2"><a class="header" href="#contents-2">Contents</a></h1>
<ul>
<li><a href="src/interfaces/IFeedOracle.sol/interface.IFeedOracle.html">IFeedOracle</a></li>
<li><a href="src/interfaces/IORMP.sol/interface.IORMP.html">IORMP</a></li>
<li><a href="src/interfaces/IOracle.sol/interface.IOracle.html">IOracle</a></li>
<li><a href="src/interfaces/IRelayer.sol/interface.IRelayer.html">IRelayer</a></li>
<li><a href="src/interfaces/IVerifier.sol/interface.IVerifier.html">IVerifier</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ifeedoracle"><a class="header" href="#ifeedoracle">IFeedOracle</a></h1>
<p><a href="https://github.com/darwinia-network/ORMP/blob/821000ae7daba26d127e75c86af046b68237ba78/src/interfaces/IFeedOracle.sol">Git Source</a></p>
<h2 id="functions-3"><a class="header" href="#functions-3">Functions</a></h2>
<h3 id="messageroot"><a class="header" href="#messageroot">messageRoot</a></h3>
<pre><code class="language-solidity">function messageRoot() external view returns (bytes32);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iormp"><a class="header" href="#iormp">IORMP</a></h1>
<p><a href="https://github.com/darwinia-network/ORMP/blob/821000ae7daba26d127e75c86af046b68237ba78/src/interfaces/IORMP.sol">Git Source</a></p>
<h2 id="functions-4"><a class="header" href="#functions-4">Functions</a></h2>
<h3 id="send"><a class="header" href="#send">send</a></h3>
<p>follow https://eips.ethereum.org/EIPS/eip-5750</p>
<p><em>Send a cross-chain message over the endpoint.</em></p>
<pre><code class="language-solidity">function send(
    uint256 toChainId,
    address to,
    uint256 gasLimit,
    bytes calldata encoded,
    address refund,
    bytes calldata params
) external payable returns (bytes32);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>toChainId</code></td><td><code>uint256</code></td><td>The Message destination chain id.</td></tr>
<tr><td><code>to</code></td><td><code>address</code></td><td>User application contract address which receive the message.</td></tr>
<tr><td><code>gasLimit</code></td><td><code>uint256</code></td><td>Gas limit for destination user application used.</td></tr>
<tr><td><code>encoded</code></td><td><code>bytes</code></td><td>The calldata which encoded by ABI Encoding.</td></tr>
<tr><td><code>refund</code></td><td><code>address</code></td><td>Return extra fee to refund address.</td></tr>
<tr><td><code>params</code></td><td><code>bytes</code></td><td>General extensibility for relayer to custom functionality.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes32</code></td><td>Return the hash of the message as message id.</td></tr>
</tbody></table>
</div>
<h3 id="fee-2"><a class="header" href="#fee-2">fee</a></h3>
<p>Get a quote in source native gas, for the amount that send() requires to pay for message delivery.</p>
<pre><code class="language-solidity">function fee(uint256 toChainId, address ua, uint256 gasLimit, bytes calldata encoded, bytes calldata params)
    external
    view
    returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>toChainId</code></td><td><code>uint256</code></td><td>The Message destination chain id.</td></tr>
<tr><td><code>ua</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>gasLimit</code></td><td><code>uint256</code></td><td>Gas limit for destination user application used.</td></tr>
<tr><td><code>encoded</code></td><td><code>bytes</code></td><td>The calldata which encoded by ABI Encoding.</td></tr>
<tr><td><code>params</code></td><td><code>bytes</code></td><td>General extensibility for relayer to custom functionality.</td></tr>
</tbody></table>
</div>
<h3 id="recv"><a class="header" href="#recv">recv</a></h3>
<p><em>Recv verified message and dispatch to destination user application address.</em></p>
<pre><code class="language-solidity">function recv(Message calldata message, bytes calldata proof) external returns (bool dispatchResult);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>message</code></td><td><code>Message</code></td><td>Verified receive message info.</td></tr>
<tr><td><code>proof</code></td><td><code>bytes</code></td><td>Message proof of this message.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>dispatchResult</code></td><td><code>bool</code></td><td>Result of the message dispatch.</td></tr>
</tbody></table>
</div>
<h3 id="prove-1"><a class="header" href="#prove-1">prove</a></h3>
<pre><code class="language-solidity">function prove() external view returns (bytes32[32] memory);
</code></pre>
<h3 id="getappconfig"><a class="header" href="#getappconfig">getAppConfig</a></h3>
<p>If user application has not configured, then the default config is used.</p>
<p><em>Fetch user application config.</em></p>
<pre><code class="language-solidity">function getAppConfig(address ua) external view returns (UC memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>ua</code></td><td><code>address</code></td><td>User application contract address.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>UC</code></td><td>user application config.</td></tr>
</tbody></table>
</div>
<h3 id="setappconfig"><a class="header" href="#setappconfig">setAppConfig</a></h3>
<p>Set user application config.</p>
<pre><code class="language-solidity">function setAppConfig(address oracle, address relayer) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>oracle</code></td><td><code>address</code></td><td>Oracle which user application choose.</td></tr>
<tr><td><code>relayer</code></td><td><code>address</code></td><td>Relayer which user application choose.</td></tr>
</tbody></table>
</div>
<h3 id="defaultuc"><a class="header" href="#defaultuc">defaultUC</a></h3>
<pre><code class="language-solidity">function defaultUC() external view returns (UC memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ioracle"><a class="header" href="#ioracle">IOracle</a></h1>
<p><a href="https://github.com/darwinia-network/ORMP/blob/821000ae7daba26d127e75c86af046b68237ba78/src/interfaces/IOracle.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/interfaces/IOracle.sol//src/interfaces/IVerifier.sol/interface.IVerifier.html">IVerifier</a></p>
<h2 id="functions-5"><a class="header" href="#functions-5">Functions</a></h2>
<h3 id="fee-3"><a class="header" href="#fee-3">fee</a></h3>
<p>Fetch oracle price to relay message root to the destination chain.</p>
<pre><code class="language-solidity">function fee(uint256 toChainId, address ua) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>toChainId</code></td><td><code>uint256</code></td><td>The destination chain id.</td></tr>
<tr><td><code>ua</code></td><td><code>address</code></td><td>The user application which send the message.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Oracle price in source native gas.</td></tr>
</tbody></table>
</div>
<h3 id="assign-2"><a class="header" href="#assign-2">assign</a></h3>
<p>Assign the relay message root task to oracle maintainer.</p>
<pre><code class="language-solidity">function assign(bytes32 msgHash) external payable;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>msgHash</code></td><td><code>bytes32</code></td><td>Hash of the message.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="irelayer"><a class="header" href="#irelayer">IRelayer</a></h1>
<p><a href="https://github.com/darwinia-network/ORMP/blob/821000ae7daba26d127e75c86af046b68237ba78/src/interfaces/IRelayer.sol">Git Source</a></p>
<h2 id="functions-6"><a class="header" href="#functions-6">Functions</a></h2>
<h3 id="fee-4"><a class="header" href="#fee-4">fee</a></h3>
<p>Fetch relayer price to relay message to the destination chain.</p>
<pre><code class="language-solidity">function fee(uint256 toChainId, address ua, uint256 gasLimit, bytes calldata encoded, bytes calldata params)
    external
    view
    returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>toChainId</code></td><td><code>uint256</code></td><td>The destination chain id.</td></tr>
<tr><td><code>ua</code></td><td><code>address</code></td><td>The user application which send the message.</td></tr>
<tr><td><code>gasLimit</code></td><td><code>uint256</code></td><td>Gas limit for destination user application used.</td></tr>
<tr><td><code>encoded</code></td><td><code>bytes</code></td><td>The calldata which encoded by ABI Encoding.</td></tr>
<tr><td><code>params</code></td><td><code>bytes</code></td><td>General extensibility for relayer to custom functionality.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Relayer price in source native gas.</td></tr>
</tbody></table>
</div>
<h3 id="assign-3"><a class="header" href="#assign-3">assign</a></h3>
<p>Assign the relay message task to relayer maintainer.</p>
<pre><code class="language-solidity">function assign(bytes32 msgHash, bytes calldata params) external payable;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>msgHash</code></td><td><code>bytes32</code></td><td>Hash of the message.</td></tr>
<tr><td><code>params</code></td><td><code>bytes</code></td><td>General extensibility for relayer to custom functionality.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="iverifier"><a class="header" href="#iverifier">IVerifier</a></h1>
<p><a href="https://github.com/darwinia-network/ORMP/blob/821000ae7daba26d127e75c86af046b68237ba78/src/interfaces/IVerifier.sol">Git Source</a></p>
<h2 id="functions-7"><a class="header" href="#functions-7">Functions</a></h2>
<h3 id="merkleroot-1"><a class="header" href="#merkleroot-1">merkleRoot</a></h3>
<p>Fetch message root oracle.</p>
<pre><code class="language-solidity">function merkleRoot(uint256 chainId, uint256 blockNumber) external view returns (bytes32);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>chainId</code></td><td><code>uint256</code></td><td>The destination chain id.</td></tr>
<tr><td><code>blockNumber</code></td><td><code>uint256</code></td><td>The block number where the message root is located.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes32</code></td><td>Message root in destination chain.</td></tr>
</tbody></table>
</div>
<h3 id="verifymessageproof"><a class="header" href="#verifymessageproof">verifyMessageProof</a></h3>
<p>Verify message proof</p>
<p><em>Message proof provided by relayer. Oracle should provide message root of
source chain, and verify the merkle proof of the message hash.</em></p>
<pre><code class="language-solidity">function verifyMessageProof(uint256 fromChainId, bytes32 msgHash, bytes calldata proof) external view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>fromChainId</code></td><td><code>uint256</code></td><td>Source chain id.</td></tr>
<tr><td><code>msgHash</code></td><td><code>bytes32</code></td><td>Hash of the message.</td></tr>
<tr><td><code>proof</code></td><td><code>bytes</code></td><td>Merkle proof of the message</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Result of the message verify.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="contents-3"><a class="header" href="#contents-3">Contents</a></h1>
<ul>
<li><a href="src/security/ExcessivelySafeCall.sol/library.ExcessivelySafeCall.html">ExcessivelySafeCall</a></li>
<li><a href="src/security/ReentrancyGuard.sol/abstract.ReentrancyGuard.html">ReentrancyGuard</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="excessivelysafecall"><a class="header" href="#excessivelysafecall">ExcessivelySafeCall</a></h1>
<p><a href="https://github.com/darwinia-network/ORMP/blob/821000ae7daba26d127e75c86af046b68237ba78/src/security/ExcessivelySafeCall.sol">Git Source</a></p>
<h2 id="state-variables-3"><a class="header" href="#state-variables-3">State Variables</a></h2>
<h3 id="low_28_mask"><a class="header" href="#low_28_mask">LOW_28_MASK</a></h3>
<pre><code class="language-solidity">uint256 private constant LOW_28_MASK = 0x00000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffff;
</code></pre>
<h2 id="functions-8"><a class="header" href="#functions-8">Functions</a></h2>
<h3 id="excessivelysafecall-1"><a class="header" href="#excessivelysafecall-1">excessivelySafeCall</a></h3>
<p>Use when you <em>really</em> really <em>really</em> don't trust the called
contract. This prevents the called contract from causing reversion of
the caller in as many ways as we can.</p>
<p><em>The main difference between this and a solidity low-level call is
that we limit the number of bytes that the callee can cause to be
copied to caller memory. This prevents stupid things like malicious
contracts returning 10,000,000 bytes causing a local OOG when copying
to memory.</em></p>
<pre><code class="language-solidity">function excessivelySafeCall(address _target, uint256 _gas, uint256 _value, uint16 _maxCopy, bytes memory _calldata)
    internal
    returns (bool, bytes memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_target</code></td><td><code>address</code></td><td>The address to call</td></tr>
<tr><td><code>_gas</code></td><td><code>uint256</code></td><td>The amount of gas to forward to the remote contract</td></tr>
<tr><td><code>_value</code></td><td><code>uint256</code></td><td>Value in wei to send to the account</td></tr>
<tr><td><code>_maxCopy</code></td><td><code>uint16</code></td><td>The maximum number of bytes of returndata to copy to memory.</td></tr>
<tr><td><code>_calldata</code></td><td><code>bytes</code></td><td>The data to send to the remote contract</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>success and returndata, as <code>.call()</code>. Returndata is capped to <code>_maxCopy</code> bytes.</td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="excessivelysafestaticcall"><a class="header" href="#excessivelysafestaticcall">excessivelySafeStaticCall</a></h3>
<p>Use when you <em>really</em> really <em>really</em> don't trust the called
contract. This prevents the called contract from causing reversion of
the caller in as many ways as we can.</p>
<p><em>The main difference between this and a solidity low-level call is
that we limit the number of bytes that the callee can cause to be
copied to caller memory. This prevents stupid things like malicious
contracts returning 10,000,000 bytes causing a local OOG when copying
to memory.</em></p>
<pre><code class="language-solidity">function excessivelySafeStaticCall(address _target, uint256 _gas, uint16 _maxCopy, bytes memory _calldata)
    internal
    view
    returns (bool, bytes memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_target</code></td><td><code>address</code></td><td>The address to call</td></tr>
<tr><td><code>_gas</code></td><td><code>uint256</code></td><td>The amount of gas to forward to the remote contract</td></tr>
<tr><td><code>_maxCopy</code></td><td><code>uint16</code></td><td>The maximum number of bytes of returndata to copy to memory.</td></tr>
<tr><td><code>_calldata</code></td><td><code>bytes</code></td><td>The data to send to the remote contract</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>success and returndata, as <code>.call()</code>. Returndata is capped to <code>_maxCopy</code> bytes.</td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="swapselector"><a class="header" href="#swapselector">swapSelector</a></h3>
<p>Swaps function selectors in encoded contract calls</p>
<p><em>Allows reuse of encoded calldata for functions with identical
argument types but different names. It simply swaps out the first 4 bytes
for the new selector. This function modifies memory in place, and should
only be used with caution.</em></p>
<pre><code class="language-solidity">function swapSelector(bytes4 _newSelector, bytes memory _buf) internal pure;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_newSelector</code></td><td><code>bytes4</code></td><td>The new 4-byte selector</td></tr>
<tr><td><code>_buf</code></td><td><code>bytes</code></td><td>The encoded contract args</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="reentrancyguard"><a class="header" href="#reentrancyguard">ReentrancyGuard</a></h1>
<p><a href="https://github.com/darwinia-network/ORMP/blob/821000ae7daba26d127e75c86af046b68237ba78/src/security/ReentrancyGuard.sol">Git Source</a></p>
<h2 id="state-variables-4"><a class="header" href="#state-variables-4">State Variables</a></h2>
<h3 id="_not_entered"><a class="header" href="#_not_entered">_NOT_ENTERED</a></h3>
<pre><code class="language-solidity">uint256 private constant _NOT_ENTERED = 1;
</code></pre>
<h3 id="_entered"><a class="header" href="#_entered">_ENTERED</a></h3>
<pre><code class="language-solidity">uint256 private constant _ENTERED = 2;
</code></pre>
<h3 id="_send_state"><a class="header" href="#_send_state">_send_state</a></h3>
<pre><code class="language-solidity">uint256 private _send_state = 1;
</code></pre>
<h3 id="_receive_state"><a class="header" href="#_receive_state">_receive_state</a></h3>
<pre><code class="language-solidity">uint256 private _receive_state = 1;
</code></pre>
<h2 id="functions-9"><a class="header" href="#functions-9">Functions</a></h2>
<h3 id="sendnonreentrant"><a class="header" href="#sendnonreentrant">sendNonReentrant</a></h3>
<pre><code class="language-solidity">modifier sendNonReentrant();
</code></pre>
<h3 id="recvnonreentrant"><a class="header" href="#recvnonreentrant">recvNonReentrant</a></h3>
<pre><code class="language-solidity">modifier recvNonReentrant();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-4"><a class="header" href="#contents-4">Contents</a></h1>
<ul>
<li><a href="src/user/Application.sol/abstract.Application.html">Application</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="application"><a class="header" href="#application">Application</a></h1>
<p><a href="https://github.com/darwinia-network/ORMP/blob/821000ae7daba26d127e75c86af046b68237ba78/src/user/Application.sol">Git Source</a></p>
<h2 id="state-variables-5"><a class="header" href="#state-variables-5">State Variables</a></h2>
<h3 id="trusted_ormp"><a class="header" href="#trusted_ormp">TRUSTED_ORMP</a></h3>
<pre><code class="language-solidity">address public immutable TRUSTED_ORMP;
</code></pre>
<h2 id="functions-10"><a class="header" href="#functions-10">Functions</a></h2>
<h3 id="constructor-2"><a class="header" href="#constructor-2">constructor</a></h3>
<pre><code class="language-solidity">constructor(address ormp);
</code></pre>
<h3 id="_setappconfig"><a class="header" href="#_setappconfig">_setAppConfig</a></h3>
<pre><code class="language-solidity">function _setAppConfig(address oracle, address relayer) internal virtual;
</code></pre>
<h3 id="onlyormp"><a class="header" href="#onlyormp">onlyORMP</a></h3>
<pre><code class="language-solidity">modifier onlyORMP();
</code></pre>
<h3 id="_messageid"><a class="header" href="#_messageid">_messageId</a></h3>
<pre><code class="language-solidity">function _messageId() internal pure returns (bytes32 _msgDataMessageId);
</code></pre>
<h3 id="_fromchainid"><a class="header" href="#_fromchainid">_fromChainId</a></h3>
<pre><code class="language-solidity">function _fromChainId() internal pure returns (uint256 _msgDataFromChainId);
</code></pre>
<h3 id="_xmsgsender"><a class="header" href="#_xmsgsender">_xmsgSender</a></h3>
<pre><code class="language-solidity">function _xmsgSender() internal pure returns (address payable _from);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="channel"><a class="header" href="#channel">Channel</a></h1>
<p><a href="https://github.com/darwinia-network/ORMP/blob/821000ae7daba26d127e75c86af046b68237ba78/src/Channel.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/Channel.sol//src/UserConfig.sol/contract.UserConfig.html">UserConfig</a></p>
<p>A channel is a logical connection over cross-chain network.
It used for cross-chain message transfer.</p>
<ul>
<li>Accepts messages to be dispatched to destination chains,
constructs a Merkle tree of the messages.</li>
<li>Dispatches verified messages from source chains.</li>
</ul>
<p>*Messages live in an incremental merkle tree (imt)</p>
<blockquote>
<p>A Merkle tree is a binary and complete tree decorated with
the Merkle (hash) attribute.*</p>
</blockquote>
<h2 id="state-variables-6"><a class="header" href="#state-variables-6">State Variables</a></h2>
<h3 id="root-1"><a class="header" href="#root-1">root</a></h3>
<p><em>Incremental merkle tree root which all message hashes live in leafs.</em></p>
<pre><code class="language-solidity">bytes32 public root;
</code></pre>
<h3 id="_imt"><a class="header" href="#_imt">_imt</a></h3>
<p><em>Incremental merkle tree.</em></p>
<pre><code class="language-solidity">IncrementalMerkleTree.Tree private _imt;
</code></pre>
<h3 id="dones"><a class="header" href="#dones">dones</a></h3>
<p><em>msgHash =&gt; isDispathed.</em></p>
<pre><code class="language-solidity">mapping(bytes32 =&gt; bool) public dones;
</code></pre>
<h3 id="__self"><a class="header" href="#__self">__self</a></h3>
<p><em>Self contract address cache.</em></p>
<pre><code class="language-solidity">address private immutable __self = address(this);
</code></pre>
<h2 id="functions-11"><a class="header" href="#functions-11">Functions</a></h2>
<h3 id="constructor-3"><a class="header" href="#constructor-3">constructor</a></h3>
<p><em>Init code.</em></p>
<pre><code class="language-solidity">constructor(address dao) UserConfig(dao);
</code></pre>
<h3 id="local_chainid"><a class="header" href="#local_chainid">LOCAL_CHAINID</a></h3>
<p><em>Fetch local chain id.</em></p>
<pre><code class="language-solidity">function LOCAL_CHAINID() public view returns (uint256 chainId);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>chainId</code></td><td><code>uint256</code></td><td>Local chain id.</td></tr>
</tbody></table>
</div>
<h3 id="_send"><a class="header" href="#_send">_send</a></h3>
<p><em>Send message.</em></p>
<pre><code class="language-solidity">function _send(address from, uint256 toChainId, address to, uint256 gasLimit, bytes calldata encoded)
    internal
    returns (bytes32);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>from</code></td><td><code>address</code></td><td>User application contract address which send the message.</td></tr>
<tr><td><code>toChainId</code></td><td><code>uint256</code></td><td>The Message destination chain id.</td></tr>
<tr><td><code>to</code></td><td><code>address</code></td><td>User application contract address which receive the message.</td></tr>
<tr><td><code>gasLimit</code></td><td><code>uint256</code></td><td>Gas limit for destination user application used.</td></tr>
<tr><td><code>encoded</code></td><td><code>bytes</code></td><td>The calldata which encoded by ABI Encoding.</td></tr>
</tbody></table>
</div>
<h3 id="_recv"><a class="header" href="#_recv">_recv</a></h3>
<p>Only message.to's config relayer could relay this message.</p>
<p><em>Receive messages.</em></p>
<pre><code class="language-solidity">function _recv(Message calldata message, bytes calldata proof) internal returns (bytes32);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>message</code></td><td><code>Message</code></td><td>Received message info.</td></tr>
<tr><td><code>proof</code></td><td><code>bytes</code></td><td>Message proof of this message.</td></tr>
</tbody></table>
</div>
<h3 id="messagecount"><a class="header" href="#messagecount">messageCount</a></h3>
<p><em>Fetch the messages count of incremental merkle tree.</em></p>
<pre><code class="language-solidity">function messageCount() public view returns (uint256);
</code></pre>
<h3 id="imtbranch"><a class="header" href="#imtbranch">imtBranch</a></h3>
<p><em>Fetch the branch of incremental merkle tree.</em></p>
<pre><code class="language-solidity">function imtBranch() public view returns (bytes32[32] memory);
</code></pre>
<h3 id="prove-2"><a class="header" href="#prove-2">prove</a></h3>
<p><em>Fetch the latest message proof</em></p>
<pre><code class="language-solidity">function prove() public view returns (bytes32[32] memory);
</code></pre>
<h2 id="events-2"><a class="header" href="#events-2">Events</a></h2>
<h3 id="messageaccepted"><a class="header" href="#messageaccepted">MessageAccepted</a></h3>
<p><em>Notifies an observer that the message has been accepted.</em></p>
<pre><code class="language-solidity">event MessageAccepted(bytes32 indexed msgHash, bytes32 root, Message message);
</code></pre>
<h3 id="messagedispatched"><a class="header" href="#messagedispatched">MessageDispatched</a></h3>
<p><em>Notifies an observer that the message has been dispatched.</em></p>
<pre><code class="language-solidity">event MessageDispatched(bytes32 indexed msgHash, bool dispatchResult);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="message"><a class="header" href="#message">Message</a></h1>
<p><a href="https://github.com/darwinia-network/ORMP/blob/821000ae7daba26d127e75c86af046b68237ba78/src/Common.sol">Git Source</a></p>
<p><em>The block of control information and data for comminicate
between user applications. Messages are the exchange medium
used by channels to send and receive data through cross-chain networks.
A message is sent from a source chain to a destination chain.</em></p>
<pre><code class="language-solidity">struct Message {
    address channel;
    uint256 index;
    uint256 fromChainId;
    address from;
    uint256 toChainId;
    address to;
    uint256 gasLimit;
    bytes encoded;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="uc"><a class="header" href="#uc">UC</a></h1>
<p><a href="https://github.com/darwinia-network/ORMP/blob/821000ae7daba26d127e75c86af046b68237ba78/src/Common.sol">Git Source</a></p>
<p><em>User application custom configuration.</em></p>
<pre><code class="language-solidity">struct UC {
    address oracle;
    address relayer;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hash"><a class="header" href="#hash">hash</a></h1>
<p><a href="https://github.com/darwinia-network/ORMP/blob/821000ae7daba26d127e75c86af046b68237ba78/src/Common.sol">Git Source</a></p>
<p><em>Hash of the message.</em></p>
<pre><code class="language-solidity">function hash(Message memory message) pure returns (bytes32);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ormp-1"><a class="header" href="#ormp-1">ORMP</a></h1>
<p><a href="https://github.com/darwinia-network/ORMP/blob/821000ae7daba26d127e75c86af046b68237ba78/src/ORMP.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/ORMP.sol//src/security/ReentrancyGuard.sol/abstract.ReentrancyGuard.html">ReentrancyGuard</a>, <a href="src/ORMP.sol//src/Channel.sol/contract.Channel.html">Channel</a></p>
<p>An endpoint is a type of network node for cross-chain communication.
It is an interface exposed by a communication channel.</p>
<p><em>An endpoint is associated with an immutable channel and user configuration.</em></p>
<h2 id="functions-12"><a class="header" href="#functions-12">Functions</a></h2>
<h3 id="constructor-4"><a class="header" href="#constructor-4">constructor</a></h3>
<pre><code class="language-solidity">constructor(address dao) Channel(dao);
</code></pre>
<h3 id="send-1"><a class="header" href="#send-1">send</a></h3>
<p>follow https://eips.ethereum.org/EIPS/eip-5750</p>
<p><em>Send a cross-chain message over the endpoint.</em></p>
<pre><code class="language-solidity">function send(
    uint256 toChainId,
    address to,
    uint256 gasLimit,
    bytes calldata encoded,
    address refund,
    bytes calldata params
) external payable sendNonReentrant returns (bytes32);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>toChainId</code></td><td><code>uint256</code></td><td>The Message destination chain id.</td></tr>
<tr><td><code>to</code></td><td><code>address</code></td><td>User application contract address which receive the message.</td></tr>
<tr><td><code>gasLimit</code></td><td><code>uint256</code></td><td>Gas limit for destination user application used.</td></tr>
<tr><td><code>encoded</code></td><td><code>bytes</code></td><td>The calldata which encoded by ABI Encoding.</td></tr>
<tr><td><code>refund</code></td><td><code>address</code></td><td>Return extra fee to refund address.</td></tr>
<tr><td><code>params</code></td><td><code>bytes</code></td><td>General extensibility for relayer to custom functionality.</td></tr>
</tbody></table>
</div>
<h3 id="_handlefee"><a class="header" href="#_handlefee">_handleFee</a></h3>
<pre><code class="language-solidity">function _handleFee(
    address ua,
    address refund,
    bytes32 msgHash,
    uint256 toChainId,
    uint256 gasLimit,
    bytes calldata encoded,
    bytes calldata params
) internal;
</code></pre>
<h3 id="fee-5"><a class="header" href="#fee-5">fee</a></h3>
<p>Get a quote in source native gas, for the amount that send() requires to pay for message delivery.</p>
<pre><code class="language-solidity">function fee(uint256 toChainId, address ua, uint256 gasLimit, bytes calldata encoded, bytes calldata params)
    external
    view
    returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>toChainId</code></td><td><code>uint256</code></td><td>The Message destination chain id.</td></tr>
<tr><td><code>ua</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>gasLimit</code></td><td><code>uint256</code></td><td>Gas limit for destination user application used.</td></tr>
<tr><td><code>encoded</code></td><td><code>bytes</code></td><td>The calldata which encoded by ABI Encoding.</td></tr>
<tr><td><code>params</code></td><td><code>bytes</code></td><td>General extensibility for relayer to custom functionality.</td></tr>
</tbody></table>
</div>
<h3 id="_handlerelayer"><a class="header" href="#_handlerelayer">_handleRelayer</a></h3>
<pre><code class="language-solidity">function _handleRelayer(
    address relayer,
    bytes32 msgHash,
    uint256 toChainId,
    address ua,
    uint256 gasLimit,
    bytes calldata encoded,
    bytes calldata params
) internal returns (uint256);
</code></pre>
<h3 id="_handleoracle"><a class="header" href="#_handleoracle">_handleOracle</a></h3>
<pre><code class="language-solidity">function _handleOracle(address oracle, bytes32 msgHash, uint256 toChainId, address ua) internal returns (uint256);
</code></pre>
<h3 id="recv-1"><a class="header" href="#recv-1">recv</a></h3>
<p>Only channel could call this function.</p>
<p><em>Recv verified message from Channel and dispatch to destination user application address.</em></p>
<pre><code class="language-solidity">function recv(Message calldata message, bytes calldata proof)
    external
    payable
    recvNonReentrant
    returns (bool dispatchResult);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>message</code></td><td><code>Message</code></td><td>Verified receive message info.</td></tr>
<tr><td><code>proof</code></td><td><code>bytes</code></td><td>Message proof of this message.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>dispatchResult</code></td><td><code>bool</code></td><td>Result of the message dispatch.</td></tr>
</tbody></table>
</div>
<h3 id="_dispatch"><a class="header" href="#_dispatch">_dispatch</a></h3>
<p><em>Dispatch the cross chain message.</em></p>
<pre><code class="language-solidity">function _dispatch(Message memory message, bytes32 msgHash) private returns (bool dispatchResult);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="userconfig"><a class="header" href="#userconfig">UserConfig</a></h1>
<p><a href="https://github.com/darwinia-network/ORMP/blob/821000ae7daba26d127e75c86af046b68237ba78/src/UserConfig.sol">Git Source</a></p>
<p>User config could select their own relayer and oracle.
The default configuration is used by default.</p>
<p><em>Only setter could set default user config.</em></p>
<h2 id="state-variables-7"><a class="header" href="#state-variables-7">State Variables</a></h2>
<h3 id="setter"><a class="header" href="#setter">setter</a></h3>
<p><em>Setter address.</em></p>
<pre><code class="language-solidity">address public setter;
</code></pre>
<h3 id="defaultuc-1"><a class="header" href="#defaultuc-1">defaultUC</a></h3>
<p><em>Default user config.</em></p>
<pre><code class="language-solidity">UC public defaultUC;
</code></pre>
<h3 id="ucof"><a class="header" href="#ucof">ucOf</a></h3>
<p><em>ua =&gt; uc.</em></p>
<pre><code class="language-solidity">mapping(address =&gt; UC) public ucOf;
</code></pre>
<h2 id="functions-13"><a class="header" href="#functions-13">Functions</a></h2>
<h3 id="onlysetter"><a class="header" href="#onlysetter">onlySetter</a></h3>
<pre><code class="language-solidity">modifier onlySetter();
</code></pre>
<h3 id="constructor-5"><a class="header" href="#constructor-5">constructor</a></h3>
<pre><code class="language-solidity">constructor(address dao);
</code></pre>
<h3 id="changesetter"><a class="header" href="#changesetter">changeSetter</a></h3>
<p>Only current setter could call.</p>
<p><em>Change setter.</em></p>
<pre><code class="language-solidity">function changeSetter(address setter_) external onlySetter;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>setter_</code></td><td><code>address</code></td><td>New setter.</td></tr>
</tbody></table>
</div>
<h3 id="setdefaultconfig"><a class="header" href="#setdefaultconfig">setDefaultConfig</a></h3>
<p>Only setter could call.</p>
<p><em>Set default user config for all user application.</em></p>
<pre><code class="language-solidity">function setDefaultConfig(address oracle, address relayer) external onlySetter;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>oracle</code></td><td><code>address</code></td><td>Default oracle.</td></tr>
<tr><td><code>relayer</code></td><td><code>address</code></td><td>Default relayer.</td></tr>
</tbody></table>
</div>
<h3 id="setappconfig-1"><a class="header" href="#setappconfig-1">setAppConfig</a></h3>
<p>Set user application config.</p>
<pre><code class="language-solidity">function setAppConfig(address oracle, address relayer) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>oracle</code></td><td><code>address</code></td><td>Oracle which user application.</td></tr>
<tr><td><code>relayer</code></td><td><code>address</code></td><td>Relayer which user application choose.</td></tr>
</tbody></table>
</div>
<h3 id="getappconfig-1"><a class="header" href="#getappconfig-1">getAppConfig</a></h3>
<p>If user application has not configured, then the default user config is used.</p>
<p><em>Fetch user application config.</em></p>
<pre><code class="language-solidity">function getAppConfig(address ua) public view returns (UC memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>ua</code></td><td><code>address</code></td><td>User application contract address.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>UC</code></td><td>user application config.</td></tr>
</tbody></table>
</div>
<h2 id="events-3"><a class="header" href="#events-3">Events</a></h2>
<h3 id="defaultconfigupdated"><a class="header" href="#defaultconfigupdated">DefaultConfigUpdated</a></h3>
<p><em>Notifies an observer that the default user config has updated.</em></p>
<pre><code class="language-solidity">event DefaultConfigUpdated(address oracle, address relayer);
</code></pre>
<h3 id="appconfigupdated"><a class="header" href="#appconfigupdated">AppConfigUpdated</a></h3>
<p><em>Notifies an observer that the user application config has updated.</em></p>
<pre><code class="language-solidity">event AppConfigUpdated(address indexed ua, address oracle, address relayer);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="verifier"><a class="header" href="#verifier">Verifier</a></h1>
<p><a href="https://github.com/darwinia-network/ORMP/blob/821000ae7daba26d127e75c86af046b68237ba78/src/Verifier.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/Verifier.sol//src/interfaces/IVerifier.sol/interface.IVerifier.html">IVerifier</a></p>
<h2 id="functions-14"><a class="header" href="#functions-14">Functions</a></h2>
<h3 id="merkleroot-2"><a class="header" href="#merkleroot-2">merkleRoot</a></h3>
<p>Fetch message root oracle.</p>
<pre><code class="language-solidity">function merkleRoot(uint256 chainId, uint256 blockNumber) public view virtual returns (bytes32);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>chainId</code></td><td><code>uint256</code></td><td>The destination chain id.</td></tr>
<tr><td><code>blockNumber</code></td><td><code>uint256</code></td><td>The block number where the message root is located.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes32</code></td><td>Message root in destination chain.</td></tr>
</tbody></table>
</div>
<h3 id="verifymessageproof-1"><a class="header" href="#verifymessageproof-1">verifyMessageProof</a></h3>
<p>Verify message proof</p>
<p><em>Message proof provided by relayer. Oracle should provide message root of
source chain, and verify the merkle proof of the message hash.</em></p>
<pre><code class="language-solidity">function verifyMessageProof(uint256 fromChainId, bytes32 msgHash, bytes calldata proof) external view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>fromChainId</code></td><td><code>uint256</code></td><td>Source chain id.</td></tr>
<tr><td><code>msgHash</code></td><td><code>bytes32</code></td><td>Hash of the message.</td></tr>
<tr><td><code>proof</code></td><td><code>bytes</code></td><td>Merkle proof of the message</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Result of the message verify.</td></tr>
</tbody></table>
</div>
<h2 id="structs-2"><a class="header" href="#structs-2">Structs</a></h2>
<h3 id="proof"><a class="header" href="#proof">Proof</a></h3>
<p>Message proof.</p>
<pre><code class="language-solidity">struct Proof {
    uint256 blockNumber;
    uint256 messageIndex;
    bytes32[32] messageProof;
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="solidity.min.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
